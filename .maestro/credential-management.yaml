appId: ${APP_ID}
env:
  PASSWORD: "TestPassword123!"
  CREDENTIAL_JSON: '{"@context":["https://www.w3.org/2018/credentials/v1"],"type":["VerifiableCredential"],"issuer":"did:example:issuer","issuanceDate":"2020-01-01T00:00:00Z","credentialSubject":{"id":"did:example:subject"}}'
---
# Reuse the onboarding flow to create a fresh wallet
- runFlow:
    file: onboarding.yaml

# Verify we are on the empty wallet home screen
- extendedWaitUntil:
    visible: "Looks like your wallet is empty."
    timeout: 15000

# Wait for animation to complete  
- waitForAnimationToEnd

# Tap on Add Credential button
- tapOn: "Add Credential"

# Wait for animation to complete
- waitForAnimationToEnd

# Paste JSON or URL - tap on input field and enter credential JSON
- tapOn:
    id: "paste-json-input"
- inputText: "${CREDENTIAL_JSON}"

# Wait a moment for the Add button to become enabled
- waitForAnimationToEnd

# Submit credential
- tapOn:
    id: "add-credential-button"

# Accept the pending credential and return home
- tapOn: "Accept"
- tapOn: "Done"

# Confirm we are back on the Home screen
- extendedWaitUntil:
    visible: "Home Screen"
    timeout: 15000
